

# 评价系统
对于大模型的回复，可以从多个维度进行打分


# 对话模拟页面


存储历史对话。历史对话发送给大模型。
NPC 对话模板应该分成三种提示词，system prompt, user prompt, AI prompt




# 线索树
- 允许用户删除线索间的依赖



# 匹配策略
embedding 的匹配策略，参考VectorClueRetrievalStrategy的实现




# 数据结构处理
id除了 uuid 之外考虑一些更加方便人类阅读的id




根据当前代码分析，我有以下 UI 优化建议：

  🎯 UI 优化建议



  ---
  3. 聊天区域增强

  | 当前问题               | 优化建议                            |
  |--------------------|---------------------------------|
  | NPC回复没有明显区分使用了哪个模板 | 在 NPC 消息旁添加标签：🎯 命中线索 或 💬 日常对话 |
  | 对话列表没有时间戳          | 添加相对时间显示                        |
  | 系统消息太突兀            | 改为更轻量的内联提示                      |

  6. Floating Action Panel

  将发送区域改为浮动在底部的固定面板，避免滚动：

  // 固定在底部
  <div style={{
    position: 'sticky',
    bottom: 0,
    background: '#fff',
    padding: 16,
    borderTop: '1px solid #f0f0f0'
  }}>
    <TextArea ... />
    <Button type="primary">发送</Button>
  </div>

  ---
  7. 视觉层级优化

  | 区域     | 建议                          |
  |--------|-----------------------------|
  | 匹配结果表格 | 触发的线索用绿色背景高亮，未触发用灰色         |
  | NPC回复  | 区分命中/未命中用不同颜色气泡（紫色 vs 橙色）   |
  | 配置区域   | 使用 Card 内的 Collapse 折叠不常用选项 |


  ---
  🚀 推荐优先级

  | 优先级 | 优化项             | 工作量 |
  |-----|-----------------|-----|
  | P0  | NPC回复标识（命中/未命中） | 小   |
  | P1  | 配置状态指示器         | 小   |
  | P1  | 响应式布局           | 中   |
  | P2  | Tabs 分组配置       | 中   |
  | P2  | 发送区域固定          | 小   |
  | P3  | 实时匹配预览          | 大   |
  | P3  | 预设配置功能          | 大   |



模拟对话页面，我希望能够看到比如相似度阈值的其他参数



# Future



# 命令行工具
快速加载数据


# 模拟对话页面

## 实时匹配预览（打字时）

只适用于后期线索全部加载的测试环境。现在每次都要清理 vector 数据库，重新插入，不太合适

  当用户输入时，实时显示可能匹配的线索预览（debounced）：

  ┌──────────────────────────────────────┐
  │ 输入: "我想知道案发当晚..."           │
  ├──────────────────────────────────────┤
  │ 📍 可能触发:                          │
  │   • 案发时间线 (相似度 0.82)          │
  │   • 不在场证明 (相似度 0.65)          │
  └──────────────────────────────────────┘

  